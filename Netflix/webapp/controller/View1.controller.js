sap.ui.define(["sap/ui/core/mvc/Controller"], function (Controller) {
	"use strict";
	return Controller.extend("Netflix.controller.View1", {
		/**
		 *@memberOf Netflix.controller.View1
		 */
		/* suche nach jahr
			sucheFilm: function() {
			//This code was generated by the layout editor.
			var jahr = this.getView().byId("__input0").getValue();
			var req = new XMLHttpRequest();

			var URL = "netflixroulette.net/api/api.php?";
			var queryType = "release_year=";
			var query = jahr;
			
			req.open('GET', URL + queryType + query, true);
			req.addEventListener("load", function() {
				var response = JSON.parse(req.responseText);
				response.forEach(function(elem) {
					console.log(elem.show_title);
			});
			});
					req.send(null);
		}*/
    //anders
    /*function byName(a, b) {
			if (a.show_title < b.show_title)
				return -1;
			else if (a.show_title > b.show_title)
				return 1;
			else
				return 0;
		}

		function byRating(a, b) {
			if (a.rating > b.rating)
				return -1;
			else if (a.rating < b.rating)
				return 1;
			else
				return 0;
		}

		req.open('GET', URL + queryType + query, true);
		req.addEventListener("load", function() {
			var response = JSON.parse(req.responseText);
			var found = false;
			response.forEach(function(elem) {
				if (elem.rating >= 4) {
					console.log(elem.show_title, elem.rating);
					found = true;
				}
			});
			if (found == false)
				console.log("No titles found with that rating.");
		});
		req.send(null);*/
    /*alte

		sucheJahr: function() {
			//This code was generated by the layout editor.
			var film = this.getView().byId("__input0").getProperty("value");
			netflixroulette.createRequest("film", function(resp) {
				console.log("flim summary = " + resp.summary);
			});
		}

			(function(namespace) {
			'use strict'
			var API_URL = "http://netflixroulette.net/api/api.php?";

			namespace.createRequest = function(requestData, callback, parseAsXml) {
				parseAsXml = !!parseAsXml;
				if (typeof callback !== 'function') {
					throw new Error("The callback parameter was not a function");
				}
				var queryString = "type=" + (parseAsXml ? "xml" : "json");
				if (typeof requestData === 'string') {
					queryString += "&title=" + requestData;
				} else if (typeof requestData === 'object' && requestData.hasOwnProperty("title")) {
					queryString += "&title=" + requestData.title;

					if (requestData.hasOwnProperty("year")) {
						queryString += "&year=" + requestData.year;
					}
				} else {
					throw new Error("I don't know how to handle " + requestData);
				}

				var httpReq = new XMLHttpRequest();
				httpReq.open("GET", API_URL + queryString.replace(/\s/ig, "%20"), true);
				httpReq.onreadystatechange = function() {
					if (httpReq.readyState !== 4) {
						return;
					}

					if (httpReq.status !== 200) {
						throw new Error("Unexpected HTTP Status Code (" + httpReq.status + ")");
					}

					callback(parseAsXml ? new DOMParser()
						.parseFromString(httpReq.responseText, "text/xml") : JSON.parse(httpReq.responseText));
				};
				httpReq.send();
			};

		})

		var req = new XMLHttpRequest();
		//jQuery.sap.declare("sap.ui.sample.netflix");

		//sap.ui.sample.sap.ui.sample.netflix = { key1 : 'value1' };

		// the following line guarantees that <code>sap.ui.sample.subspace</code> is a valid object
		//sap.ui.namespace("sap.ui.sample.netflixroulette");

		//A module declaration, ensures that sap.ui.sample exists

		//var Netflix = Netflixroulette || {};

		//var ns = MYAPPLICATION.createNS("sap.ui.sample.netflix");

		//(var netflixroulette || (netflixroulette = {}));

		// Examples

		// Requesting by title only
		netflixroulette.createRequest("Breaking Bad", function(resp) {
			console.log("Breaking Bad's Summary = " + resp.summary);
		});

		// XML Response, resp is a document object
		netflixroulette.createRequest({
			title: "The Boondocks",
			year: 2005
		}, function(resp) {
			console.log("The Boondocks' Summary = " + resp.querySelector("netflixroulette summary").innerHTML);
		}, true);

		// JSON Response, resp is a JSON object
		netflixroulette.createRequest({
			title: "The Boondocks",
			year: 2005
		}, function(resp) {
			console.log("The Boondocks' Summary = " + resp.summary);
		});*/
		/**
	*@memberOf Netflix.controller.View1
	*/
searchActor: function () {
//This code was generated by the layout editor.
var view=this.getView();
	var actor = view.byId("__input0").getValue();
			var req = new XMLHttpRequest();
			var URL = "https://netflixroulette.net/api/api.php?";
			var queryType = "actor=";
			var query = actor;
			req.open("GET", URL + queryType + query, true);
			req.addEventListener("load", function () {
				var response = JSON.parse(req.responseText);
				response.forEach(function (elem) {
					view.byId("__area0").setValue(response);
					
				});
			});
			req.send(null);
		}
	});
});